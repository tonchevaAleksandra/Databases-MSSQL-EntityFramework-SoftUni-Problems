CREATE DATABASE OnlineStore

USE OnlineStore

CREATE TABLE Cities
(
    CityID int PRIMARY KEY IDENTITY,
    Name   nvarchar(50) NOT NULL
)

CREATE TABLE Customers
(
    CustomerID int PRIMARY KEY IDENTITY,
    Name       nvarchar(50) NOT NULL,
    Birthday   date,
    CityID     int FOREIGN KEY REFERENCES Cities (CityID)
)

CREATE TABLE ItemTypes
(
    ItemTypeID int PRIMARY KEY IDENTITY,
    Name       nvarchar(50) NOT NULL
)

CREATE TABLE Items
(
    ItemID     int PRIMARY KEY IDENTITY,
    Name       nvarchar(50) NOT NULL,
    ItemTypeID int FOREIGN KEY REFERENCES ItemTypes (ItemTypeID)
)

CREATE TABLE OrderItems
(
    OrderID int PRIMARY KEY IDENTITY,
    ItemId  int FOREIGN KEY REFERENCES Items (ItemID)
)

CREATE TABLE Orders
(
    OrderID int NOT NULL FOREIGN KEY  REFERENCES OrderItems(OrderID)  ,
    CustomerID int NOT NULL FOREIGN  KEY  REFERENCES Customers(CustomerID)  ,
    PRIMARY KEY (OrderID, CustomerID)
)